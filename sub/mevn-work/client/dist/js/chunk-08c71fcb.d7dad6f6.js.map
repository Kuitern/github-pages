{"version":3,"sources":["webpack:///./src/pages/msfWap/views/project/Order.vue?96bd","webpack:///./src/pages/msfWap/views/project/Order.vue?5b0a","webpack:///./src/pages/msfWap/views/project/Order.vue?4530","webpack:///./src/pages/msfWap/views/project/Order.vue","webpack:///./src/pages/msfWap/views/project/Order.vue?1fcd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","orderInfo","project","coreEnterpriseShortName","projectNo","ratePerYear","dueTime","month","day","staticStyle","balance","attrs","model","options","on","submitHandler","userInfo","availableAmt","fields","scopedSlots","_u","key","fn","proxy","value","callback","$$v","$set","expression","staticRenderFns","selectedLabel","amount","checked","type","modelKey","props","placeholer","clearable","rules","required","trigger","messages","scrollToInvalidField","layout","getInvestUserInfo","getInvestOrder","e","preventDefault","$createToast","time","txt","show","applyedCA","$request","api","token","$store","state","params","$route","id","originReturnUrl","rewardAmt","couponIds","acceptedAgreement","transferRiskRemind","bondInvestAgreement","returnUrl","originNodeServer","method","data","resCode","formSubmitData","url","shUrl","$router","push","components","component"],"mappings":"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","file":"js/chunk-08c71fcb.d7dad6f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\"},[_c('div',{staticClass:\"project-info\"},[_c('p',[_vm._v(_vm._s(_vm.orderInfo.project.coreEnterpriseShortName)+\" \"+_vm._s(_vm.orderInfo.project.projectNo))]),_c('div',{staticClass:\"info\"},[_c('div',[_c('p',[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.ratePerYear))]),_c('span',[_vm._v(\"%/年\")])]),_c('label',[_vm._v(\"回报\")])]),_c('div',[(_vm.orderInfo.project.dueTime.month)?_c('p',[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.dueTime.month))]),_c('span',[_vm._v(\"个月\")])]):_c('p',[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.dueTime.day))]),_c('span',[_vm._v(\"天\")])]),_c('label',[_vm._v(\"项目期限\")])]),_c('div',[_c('p',{staticStyle:{\"position\":\"relative\"}},[_c('b',[_vm._v(_vm._s(_vm.orderInfo.project.balance))]),_c('span',[_vm._v(\" 元\")])]),_c('label',[_vm._v(\"剩余额度\")])])])]),_c('cube-form',{attrs:{\"model\":_vm.model,\"options\":_vm.options},on:{\"submit\":_vm.submitHandler}},[_c('div',{staticClass:\"container-cube-form-item\",staticStyle:{\"font-size\":\"8px\"}},[_vm._v(\"账户可用余额（元）：\"+_vm._s(_vm.userInfo.availableAmt))]),_c('cube-form-item',{attrs:{\"field\":_vm.fields[0]}},[_c('cube-input',{staticStyle:{\"font-size\":\"16px\"},attrs:{\"placeholder\":\"请输入出借金额，100元起投，100元递增\"},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('span',{staticClass:\"amount-prepend\"},[_vm._v(\"￥\")])]},proxy:true}]),model:{value:(_vm.model.amount),callback:function ($$v) {_vm.$set(_vm.model, \"amount\", $$v)},expression:\"model.amount\"}})],1),_c('cube-form-item',{staticClass:\"container-cube-form-item\",attrs:{\"field\":_vm.fields[1]}},[_c('cube-checkbox',{staticClass:\"with-click\",model:{value:(_vm.model.checked),callback:function ($$v) {_vm.$set(_vm.model, \"checked\", $$v)},expression:\"model.checked\"}},[_vm._v(\"我已阅读并知悉\"),_c('a',{attrs:{\"href\":\"https://wap.daokoudai.com/help/riskTip\"}},[_vm._v(\"《网络借贷风险提示》\")]),_vm._v(\"和\"),_c('a',{attrs:{\"href\":\"https://wap.daokoudai.com/help/forbidAction\"}},[_vm._v(\"《网络借贷平台禁止性行为》\")])])],1),_c('cube-button',{attrs:{\"type\":\"submit\"}},[_vm._v(\"确认\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { getUrlParam } from '@/utils/common.ts'\nimport { isEmpty } from '@/utils'\nimport { Component, Vue } from 'vue-property-decorator';\n@Component({\n  components: {},\n})\nexport default class ViewComponent extends Vue {\n  /**data */\n  userInfo: any = {}\n  orderInfo: any = {\n    project:{\n      dueTime:{}\n    }\n  }\n  selectedLabel = '' // 充值页，结果页\n  model = {\n    amount: '',\n    checked: '',\n  }\n  fields = [\n    {\n      type: \"input\",\n      modelKey: \"amount\",\n      // label: \"￥\",\n      props: {\n        placeholer: \"输入金额\",\n        clearable: true,\n      },\n      rules: {\n        required: true,\n      },\n      trigger: \"blur\",// *待优化：这样会触发多次异步请求校验。思路一：仅当提交表单时才发起一次异步校验\n      messages: {\n        required: \"不能为空\",\n      },\n    },\n    {\n      type: 'checkbox',\n      modelKey: 'checked',\n      rules: {\n        required: true\n      },\n      messages: {\n        required: '请同意'\n      }\n    },\n  ]\n\n  options = {\n    scrollToInvalidField: true,\n    layout: 'fresh' // standard classic\n  }\n\n  /**life hook */\n  created() {\n    this.getInvestUserInfo();\n    this.getInvestOrder();\n    if (getUrlParam('amount')) {\n      this.model.amount = getUrlParam('amount')\n    }\n  }\n\n  /**method */\n  async submitHandler(e: any) {\n    e.preventDefault();\n    if (isEmpty(this.userInfo) || isEmpty(this.orderInfo)) return;\n    if(+this.model.amount > +this.orderInfo.project.balance){\n      this.$createToast({\n        type: 'warn',\n        time: 2000,\n        txt: '超过账户可用余额'\n      }).show();\n      return;\n    }else if(+this.model.amount > +this.userInfo.availableAmt){\n      this.$createToast({\n        type: 'warn',\n        time: 2000,\n        txt: '超过项目剩余额度'\n      }).show();\n      return;\n    }\n\n    // 1.申请CA \n    if (!this.userInfo.applyedCA) {\n      this.$request({\n        api: 'applyCA',\n        token: this.$store.state.token,\n      })\n    }\n\n    // 2.中间页跳转申请\n    const data = await this.$request({\n      api: 'investConfirm', // 2.充值确认  --懒猫充值相关\n      params: {\n        amount: this.model.amount,\n        projectNo: this.$route.params.id,\n        originReturnUrl: this.$store.state.originReturnUrl,\n\n        token: this.$store.state.token,\n        rewardAmt: 0,\n        couponIds: '',\n        acceptedAgreement: true,\n        transferRiskRemind: true,\n        bondInvestAgreement: true,\n        returnUrl: `${this.$store.state.originNodeServer}/project/investReturn`,\n      },\n      method: 'post',\n    })\n\n    if (data.resCode === '0000') {\n      this.$request({\n        formSubmitData: {\n          url: data.shUrl,\n          params: data.params,\n          returnUrl: data.returnUrl,\n        }\n      })\n    }\n    else {\n      if (data.resCode !== 'E1070044') {\n        this.$router.push('/project/investReturn?result=false')\n      }\n    }\n  }\n\n  async getInvestUserInfo() {\n    const data = await this.$request({\n      api: 'getInvestUserInfo', // 出借订单页获取用户信息\n      params: {\n        projectNo: this.$route.params.id,\n        token: this.$store.state.token,\n      },\n    })\n\n    if (data.resCode === '0000') {\n      this.userInfo = data\n    }\n  }\n  async getInvestOrder() {\n    const data = await this.$request({\n      api: 'getInvestOrder', // 项目出借订单页\n      params: {\n        projectNo: this.$route.params.id,\n        token: this.$store.state.token,\n      },\n    })\n\n    if (data.resCode === '0000') {\n      this.orderInfo = data\n    }\n  }\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??ref--17-2!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=23219e30&scoped=true&lang=pug&\"\nimport script from \"./Order.vue?vue&type=script&lang=ts&\"\nexport * from \"./Order.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=23219e30&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23219e30\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=23219e30&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=23219e30&lang=stylus&scoped=true&\""],"sourceRoot":""}